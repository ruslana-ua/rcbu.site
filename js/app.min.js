(()=>{"use strict";const e={};let t=(e,t=500,i=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=i?`${i}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!i,!i&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!i&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},i=(e,t=500,i=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,i&&e.style.removeProperty("height");let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=i?`${i}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}},n=!0,o=(e=500)=>{if(n){const t=document.querySelectorAll("[data-lp]");setTimeout((()=>{t.forEach((e=>{e.style.paddingRight=""})),document.body.style.paddingRight="",document.documentElement.classList.remove("lock")}),e),n=!1,setTimeout((function(){n=!0}),e)}},s=(e=500)=>{if(n){const t=document.querySelectorAll("[data-lp]"),i=window.innerWidth-document.body.offsetWidth+"px";t.forEach((e=>{e.style.paddingRight=i})),document.body.style.paddingRight=i,document.documentElement.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),e)}};function r(e,t){const i=Array.from(e).filter((function(e,i,n){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(i.length){const e=[];i.forEach((i=>{const n={},o=i.dataset[t].split(",");n.value=o[0],n.type=o[1]?o[1].trim():"max",n.item=i,e.push(n)}));let n=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));n=function(e){return e.filter((function(e,t,i){return i.indexOf(e)===t}))}(n);const o=[];if(n.length)return n.forEach((t=>{const i=t.split(","),n=i[1],s=i[2],r=window.matchMedia(i[0]),a=e.filter((function(e){if(e.value===n&&e.type===s)return!0}));o.push({itemsArray:a,matchMedia:r})})),o}}e.popup=new class{constructor(e){let t={logging:!0,init:!0,attributeOpenButton:"data-popup",attributeCloseButton:"data-close",fixElementSelector:"[data-lp]",youtubeAttribute:"data-popup-youtube",youtubePlaceAttribute:"data-popup-youtube-place",setAutoplayYoutube:!0,classes:{popup:"popup",popupContent:"popup__content",popupActive:"popup_show",bodyActive:"popup-show"},focusCatch:!0,closeEsc:!0,bodyLock:!0,hashSettings:{location:!0,goHash:!0},on:{beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}};this.youTubeCode,this.isOpen=!1,this.targetOpen={selector:!1,element:!1},this.previousOpen={selector:!1,element:!1},this.lastClosed={selector:!1,element:!1},this._dataValue=!1,this.hash=!1,this._reopen=!1,this._selectorOpen=!1,this.lastFocusEl=!1,this._focusEl=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.options={...t,...e,classes:{...t.classes,...e?.classes},hashSettings:{...t.hashSettings,...e?.hashSettings},on:{...t.on,...e?.on}},this.bodyLock=!1,this.options.init&&this.initPopups()}initPopups(){this.popupLogging("Прокинувся"),this.eventsPopup()}eventsPopup(){document.addEventListener("click",function(e){const t=e.target.closest(`[${this.options.attributeOpenButton}]`);if(t)return e.preventDefault(),this._dataValue=t.getAttribute(this.options.attributeOpenButton)?t.getAttribute(this.options.attributeOpenButton):"error",this.youTubeCode=t.getAttribute(this.options.youtubeAttribute)?t.getAttribute(this.options.youtubeAttribute):null,"error"!==this._dataValue?(this.isOpen||(this.lastFocusEl=t),this.targetOpen.selector=`${this._dataValue}`,this._selectorOpen=!0,void this.open()):void this.popupLogging(`Йой, не заповнено атрибут у ${t.classList}`);return e.target.closest(`[${this.options.attributeCloseButton}]`)||!e.target.closest(`.${this.options.classes.popupContent}`)&&this.isOpen?(e.preventDefault(),void this.close()):void 0}.bind(this)),document.addEventListener("keydown",function(e){if(this.options.closeEsc&&27==e.which&&"Escape"===e.code&&this.isOpen)return e.preventDefault(),void this.close();this.options.focusCatch&&9==e.which&&this.isOpen&&this._focusCatch(e)}.bind(this)),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",function(){window.location.hash?this._openToHash():this.close(this.targetOpen.selector)}.bind(this)),window.addEventListener("load",function(){window.location.hash&&this._openToHash()}.bind(this)))}open(e){if(n)if(this.bodyLock=!(!document.documentElement.classList.contains("lock")||this.isOpen),e&&"string"==typeof e&&""!==e.trim()&&(this.targetOpen.selector=e,this._selectorOpen=!0),this.isOpen&&(this._reopen=!0,this.close()),this._selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this._reopen||(this.previousActiveElement=document.activeElement),this.targetOpen.element=document.querySelector(this.targetOpen.selector),this.targetOpen.element){if(this.youTubeCode){const e=`https://www.youtube.com/embed/${this.youTubeCode}?rel=0&showinfo=0&autoplay=1`,t=document.createElement("iframe");t.setAttribute("allowfullscreen","");const i=this.options.setAutoplayYoutube?"autoplay;":"";if(t.setAttribute("allow",`${i}; encrypted-media`),t.setAttribute("src",e),!this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)){this.targetOpen.element.querySelector(".popup__text").setAttribute(`${this.options.youtubePlaceAttribute}`,"")}this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).appendChild(t)}this.options.hashSettings.location&&(this._getHash(),this._setHash()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforePopupOpen",{detail:{popup:this}})),this.targetOpen.element.classList.add(this.options.classes.popupActive),document.documentElement.classList.add(this.options.classes.bodyActive),this._reopen?this._reopen=!1:!this.bodyLock&&s(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen.selector=this.targetOpen.selector,this.previousOpen.element=this.targetOpen.element,this._selectorOpen=!1,this.isOpen=!0,setTimeout((()=>{this._focusTrap()}),50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterPopupOpen",{detail:{popup:this}})),this.popupLogging("Відкрив попап")}else this.popupLogging("Йой, такого попапу немає. Перевірте коректність введення. ")}close(e){e&&"string"==typeof e&&""!==e.trim()&&(this.previousOpen.selector=e),this.isOpen&&n&&(this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforePopupClose",{detail:{popup:this}})),this.youTubeCode&&this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)&&(this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).innerHTML=""),this.previousOpen.element.classList.remove(this.options.classes.popupActive),this.previousOpen.element.setAttribute("aria-hidden","true"),this._reopen||(document.documentElement.classList.remove(this.options.classes.bodyActive),!this.bodyLock&&o(),this.isOpen=!1),this._removeHash(),this._selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterPopupClose",{detail:{popup:this}})),setTimeout((()=>{this._focusTrap()}),50),this.popupLogging("Закрив попап"))}_getHash(){this.options.hashSettings.location&&(this.hash=this.targetOpen.selector.includes("#")?this.targetOpen.selector:this.targetOpen.selector.replace(".","#"))}_openToHash(){let e=document.querySelector(`.${window.location.hash.replace("#","")}`)?`.${window.location.hash.replace("#","")}`:document.querySelector(`${window.location.hash}`)?`${window.location.hash}`:null;const t=document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`)?document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`):document.querySelector(`[${this.options.attributeOpenButton} = "${e.replace(".","#")}"]`);this.youTubeCode=t.getAttribute(this.options.youtubeAttribute)?t.getAttribute(this.options.youtubeAttribute):null,t&&e&&this.open(e)}_setHash(){history.pushState("","",this.hash)}_removeHash(){history.pushState("","",window.location.href.split("#")[0])}_focusCatch(e){const t=this.targetOpen.element.querySelectorAll(this._focusEl),i=Array.prototype.slice.call(t),n=i.indexOf(document.activeElement);e.shiftKey&&0===n&&(i[i.length-1].focus(),e.preventDefault()),e.shiftKey||n!==i.length-1||(i[0].focus(),e.preventDefault())}_focusTrap(){const e=this.previousOpen.element.querySelectorAll(this._focusEl);!this.isOpen&&this.lastFocusEl?this.lastFocusEl.focus():e[0].focus()}popupLogging(e){this.options.logging&&function(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}(`[Попапос]: ${e}`)}}({});let a=!1;
/*!
  * Button visually impaired - v1.0.0 https://bvi.isvek.ru
  * Copyright 2014-2021 Oleg Korotenko <bvi@isvek.ru>.
  * Licensed MIT (https://github.com/veks/button-visually-impaired-javascript/blob/master/LICENSE.md)
  */var l,c;setTimeout((()=>{if(a){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),l=void 0,c=function(){function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){l=!0,s=e},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw s}}}}!function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,n){var o=t&&t.prototype instanceof g?t:g,s=Object.create(o.prototype),r=new q(n||[]);return s._invoke=function(e,t,i){var n=h;return function(o,s){if(n===v)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw s;return C()}for(i.method=o,i.arg=s;;){var r=i.delegate;if(r){var a=O(r,i);if(a){if(a===m)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=v;var l=d(e,t,i);if("normal"===l.type){if(n=i.done?f:p,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(e,i,r),s}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",p="suspendedYield",v="executing",f="completed",m={};function g(){}function b(){}function y(){}var S={};c(S,r,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(x([])));w&&w!==n&&o.call(w,r)&&(S=w);var L=y.prototype=g.prototype=Object.create(S);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(s,r,a,l){var c=d(e[s],e,r);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"===i(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var s;this._invoke=function(e,i){function o(){return new t((function(t,o){n(e,i,t,o)}))}return s=s?s.then(o,o):o()}}function O(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,O(e,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=d(n,e.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,m;var s=o.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(e){if(e){var i=e[r];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function i(){for(;++n<e.length;)if(o.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:C}}function C(){return{value:t,done:!0}}return b.prototype=y,c(L,"constructor",y),c(y,"constructor",b),b.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,i,n,o,s){void 0===s&&(s=Promise);var r=new k(u(t,i,n,o),s);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},E(L),c(L,l,"Generator"),c(L,r,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=x,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(n,o){return a.type="throw",a.arg=e,i.next=n,o&&(i.method="next",i.arg=t),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),B(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;B(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:x(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":i(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);var c=function(e,t,n){Object.keys(t).forEach((function(n){var o,s=t[n],r=e[n],a=r&&(o=r)&&"object"===i(o)&&void 0!==o.nodeType?"element":function(e){return null==e?"".concat(e):{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}(r);if(!new RegExp(s).test(a))throw new TypeError('Bvi console: Опция "'.concat(n,'" предоставленный тип "').concat(a,'", ожидаемый тип "').concat(s,'".'))})),Object.keys(n).forEach((function(t){var i=n[t],o=e[t];if(!new RegExp(i).test(o))throw new TypeError('Bvi console: Опция "'.concat(t,'" параметр "').concat(o,'", ожидаемый параметр "').concat(i,'".'))}))},u=function(e){switch(e){case"on":case"true":case"1":return!0;default:return!1}},d=function(e,t,i){for("string"==typeof t&&(t=document.createElement(t)),e.appendChild(t).className=i;e.firstChild!==t;)t.appendChild(e.firstChild)},h=function(e){var t=document.createDocumentFragment();if(e){for(;e.firstChild;){var i=e.removeChild(e.firstChild);t.appendChild(i)}e.parentNode.replaceChild(t,e)}},p=function(e,t){Object.keys(e).forEach((function(e){"function"==typeof t&&t(e)}))},v=function(e,t){Array.from(e).forEach((function(e){"function"==typeof t&&t(e)}))},f=function(){return window.speechSynthesis},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=new Date,n=i.getTime();n+=864e5,i.setTime(n),document.cookie="bvi_".concat(e,"=").concat(t,";path=/;expires=").concat(i.toUTCString(),";domain=").concat(location.host)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e="bvi_".concat(e,"=");for(var t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){var n=t[i].trim();if(-1!==n.indexOf(e))return n.substring(e.length,n.length)}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.cookie="bvi_".concat(e,"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(location.host)},y={"ru-RU":{text:{fontSize:"Размер шрифта",siteColors:"Цвета сайта",images:"Изображения",speech:"Синтез речи",settings:"Настройки",regularVersionOfTheSite:"Обычная версия сайта",letterSpacing:"Межбуквенное расстояние",normal:"Стандартный",average:"Средний",big:"Большой",lineHeight:"Межстрочный интервал",font:"Шрифт",arial:"Без засечек",times:"С засечками",builtElements:"Встроенные элементы (Видео, карты и тд.)",on:"Включить",off:"Выключить",reset:"Сбросить настройки",plural_0:"пиксель",plural_1:"пекселя",plural_2:"пикселей"},voice:{fontSizePlus:"Размер шрифта увели́чен",fontSizeMinus:"Размер шрифта уме́ньшен",siteColorBlackOnWhite:"Цвет сайта черным по белому",siteColorWhiteOnBlack:"Цвет сайта белым по черному",siteColorDarkBlueOnBlue:"Цвет сайта тёмно-синим по голубому",siteColorBeigeBrown:"Цвет сайта кори́чневым по бе́жевому",siteColorGreenOnDarkBrown:"Цвет сайта зеленым по тёмно-коричневому",imagesOn:"Изображения включены",imagesOFF:"Изображения выключены",imagesGrayscale:"Изображения чёрно-белые",speechOn:"Синтез речи включён",speechOff:"Синтез речи вы́ключен",lineHeightNormal:"Межстрочный интервал стандартный",lineHeightAverage:"Межстрочный интервал средний",lineHeightBig:"Межстрочный интервал большой",LetterSpacingNormal:"Интервал между буквами стандартный",LetterSpacingAverage:"Интервал между буквами средний",LetterSpacingBig:"Интервал между буквами большой",fontArial:"Шрифт без засечек",fontTimes:"Шрифт с засечками",builtElementsOn:"Встроенные элементы включены",builtElementsOFF:"Встроенные элементы выключены",resetSettings:"Установлены настройки по умолча́нию",panelShow:"Панель открыта",panelHide:"Панель скрыта",panelOn:"Версия сайта для слабови́дящий",panelOff:"Обычная версия сайта"}},"en-US":{text:{fontSize:"Font size",siteColors:"Site colors",images:"Images",speech:"Speech synthesis",settings:"Settings",regularVersionOfTheSite:"Regular version Of The site",letterSpacing:"Letter spacing",normal:"Single",average:"One and a half",big:"Double",lineHeight:"Line spacing",font:"Font",arial:"Sans Serif - Arial",times:"Serif - Times New Roman",builtElements:"Include inline elements (Videos, maps, etc.)",on:"Enable",off:"Disabled",reset:"Reset settings",plural_0:"pixel",plural_1:"pixels",plural_2:"pixels"},voice:{fontSizePlus:"Font size increased",fontSizeMinus:"Font size reduced",siteColorBlackOnWhite:"Site color black on white",siteColorWhiteOnBlack:"Site color white on black",siteColorDarkBlueOnBlue:"Site color dark blue on cyan",siteColorBeigeBrown:"SiteColorBeigeBrown",siteColorGreenOnDarkBrown:"Site color green on dark brown",imagesOn:"Images enable",imagesOFF:"Images disabled",imagesGrayscale:"Images gray scale",speechOn:"Synthesis speech enable",speechOff:"Synthesis speech disabled",lineHeightNormal:"Line spacing single",lineHeightAverage:"Line spacing one and a half",lineHeightBig:"Line spacing double",LetterSpacingNormal:"Letter spacing single",LetterSpacingAverage:"Letter spacing one and a half",LetterSpacingBig:"Letter spacing letter double",fontArial:"Sans Serif - Arial",fontTimes:"Serif - Times New Roman",builtElementsOn:"Include inline elements are enabled",builtElementsOFF:"Include inline elements are disabled",resetSettings:"Default settings have been set",panelShow:"Panel show",panelHide:"Panel hide",panelOn:"Site version for visually impaired",panelOff:"Regular version of the site"}}},S=function(){function e(t){n(this,e),this._config=t}return s(e,[{key:"t",value:function(e){return y[this._config.lang].text[e]}},{key:"v",value:function(e){return y[this._config.lang].voice[e]}}]),e}(),_={target:".bvi-open",fontSize:16,theme:"white",images:"grayscale",letterSpacing:"normal",lineHeight:"normal",speech:!0,fontFamily:"arial",builtElements:!1,panelFixed:!0,panelHide:!1,reload:!1,lang:"ru-RU"},w={target:"string",fontSize:"number",theme:"string",images:"(string|boolean)",letterSpacing:"string",lineHeight:"string",speech:"boolean",fontFamily:"string",builtElements:"boolean",panelFixed:"boolean",panelHide:"boolean",reload:"boolean",lang:"string"},L={target:"",fontSize:"(^[1-9]$|^[1-3][0-9]?$|^39$)",theme:"(white|black|blue|brown|green)",images:"(true|false|grayscale)",letterSpacing:"(normal|average|big)",lineHeight:"(normal|average|big)",speech:"(true|false)",fontFamily:"(arial|times)",builtElements:"(true|false)",panelFixed:"(true|false)",panelHide:"(true|false)",reload:"(true|false)",lang:"(ru-RU|en-US)"},E=function(){function e(t){n(this,e),this._config=this._getConfig(t),this._elements=document.querySelectorAll(this._config.target),this._i18n=new S({lang:this._config.lang}),this._addEventListeners(),this._init(),console.log("Bvi console: ready Button visually impaired v1.0.0")}return s(e,[{key:"_init",value:function(){p(this._config,(function(e){void 0===g(e)&&b("panelActive")})),u(g("panelActive"))?(this._set(),this._getPanel(),this._addEventListenersPanel(),this._images(),this._speechPlayer(),"speechSynthesis"in window&&u(g("speech"))&&setInterval((function(){if(!1===f().pending){var e=document.querySelectorAll(".bvi-speech-play"),t=document.querySelectorAll(".bvi-speech-pause"),i=document.querySelectorAll(".bvi-speech-resume"),n=document.querySelectorAll(".bvi-speech-stop"),o=function(e,t){e.forEach((function(e){return t(e)}))};o(e,(function(e){return e.classList.remove("disabled")})),o(t,(function(e){return e.classList.add("disabled")})),o(i,(function(e){return e.classList.add("disabled")})),o(n,(function(e){return e.classList.add("disabled")}))}}),1e3)):this._remove()}},{key:"_addEventListeners",value:function(){var e=this;if(!this._elements)return!1;this._elements.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),p(e._config,(function(t){return m(t,e._config[t])})),m("panelActive",!0),e._init(),e._speech("".concat(e._i18n.v("panelOn")))}))}))}},{key:"_addEventListenersPanel",value:function(){var e=this,t={fontSizeMinus:document.querySelector(".bvi-fontSize-minus"),fontSizePlus:document.querySelector(".bvi-fontSize-plus"),themeWhite:document.querySelector(".bvi-theme-white"),themeBlack:document.querySelector(".bvi-theme-black"),themeBlue:document.querySelector(".bvi-theme-blue"),themeBrown:document.querySelector(".bvi-theme-brown"),themeGreen:document.querySelector(".bvi-theme-green"),imagesOn:document.querySelector(".bvi-images-on"),imagesOff:document.querySelector(".bvi-images-off"),imagesGrayscale:document.querySelector(".bvi-images-grayscale"),speechOn:document.querySelector(".bvi-speech-on"),speechOff:document.querySelector(".bvi-speech-off"),lineHeightNormal:document.querySelector(".bvi-line-height-normal"),lineHeightAverage:document.querySelector(".bvi-line-height-average"),lineHeightBig:document.querySelector(".bvi-line-height-big"),letterSpacingNormal:document.querySelector(".bvi-letter-spacing-normal"),letterSpacingAverage:document.querySelector(".bvi-letter-spacing-average"),letterSpacingBig:document.querySelector(".bvi-letter-spacing-big"),fontFamilyArial:document.querySelector(".bvi-font-family-arial"),fontFamilyTimes:document.querySelector(".bvi-font-family-times"),builtElementsOn:document.querySelector(".bvi-built-elements-on"),builtElementsOff:document.querySelector(".bvi-built-elements-off"),reset:document.querySelector(".bvi-reset"),links:document.querySelectorAll(".bvi-link"),modal:document.querySelector(".bvi-modal")},i=function(e){var t,i=l(e.parentNode.children);try{for(i.s();!(t=i.n()).done;)t.value.classList.remove("active")}catch(e){i.e(e)}finally{i.f()}e.classList.add("active")},n=function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),"function"==typeof t&&t(e)}))},o=function(){document.querySelectorAll(".bvi-link").forEach((function(e){e.classList.remove("active")})),p(e._config,(function(e){if("theme"===e){var t=g(e);document.querySelector(".bvi-theme-".concat(t)).classList.add("active")}if("images"===e){var i="grayscale"===g(e)?"grayscale":u(g(e))?"on":"off";document.querySelector(".bvi-images-".concat(i)).classList.add("active")}if("speech"===e){var n=u(g(e))?"on":"off";document.querySelector(".bvi-speech-".concat(n)).classList.add("active")}if("lineHeight"===e){var o=g(e);document.querySelector(".bvi-line-height-".concat(o)).classList.add("active")}if("letterSpacing"===e){var s=g(e);document.querySelector(".bvi-letter-spacing-".concat(s)).classList.add("active")}if("fontFamily"===e){var r=g(e);document.querySelector(".bvi-font-family-".concat(r)).classList.add("active")}if("builtElements"===e){var a=u(g(e))?"on":"off";document.querySelector(".bvi-built-elements-".concat(a)).classList.add("active")}}))};o(),n(t.fontSizeMinus,(function(){var n=parseFloat(g("fontSize"))-1;0!==n&&(e._setAttrDataBviBody("fontSize",n),m("fontSize",n),e._speech("".concat(e._i18n.v("fontSizeMinus"))),i(t.fontSizeMinus))})),n(t.fontSizePlus,(function(){var n=parseFloat(g("fontSize"))+1;40!==n&&(e._setAttrDataBviBody("fontSize",n),m("fontSize",n),e._speech("".concat(e._i18n.v("fontSizePlus"))),i(t.fontSizePlus))})),n(t.themeWhite,(function(){e._setAttrDataBviBody("theme","white"),m("theme","white"),e._speech("".concat(e._i18n.v("siteColorBlackOnWhite"))),i(t.themeWhite)})),n(t.themeBlack,(function(){e._setAttrDataBviBody("theme","black"),m("theme","black"),e._speech("".concat(e._i18n.v("siteColorWhiteOnBlack"))),i(t.themeBlack)})),n(t.themeBlue,(function(){e._setAttrDataBviBody("theme","blue"),m("theme","blue"),e._speech("".concat(e._i18n.v("siteColorDarkBlueOnBlue"))),i(t.themeBlue)})),n(t.themeBrown,(function(){e._setAttrDataBviBody("theme","brown"),m("theme","brown"),e._speech("".concat(e._i18n.v("siteColorBeigeBrown"))),i(t.themeBrown)})),n(t.themeGreen,(function(){e._setAttrDataBviBody("theme","green"),m("theme","green"),e._speech("".concat(e._i18n.v("siteColorGreenOnDarkBrown"))),i(t.themeGreen)})),n(t.imagesOn,(function(){e._setAttrDataBviBody("images","true"),m("images","true"),e._speech("".concat(e._i18n.v("imagesOn"))),i(t.imagesOn)})),n(t.imagesOff,(function(){e._setAttrDataBviBody("images","false"),m("images","false"),e._speech("".concat(e._i18n.v("imagesOFF"))),i(t.imagesOff)})),n(t.imagesGrayscale,(function(){e._setAttrDataBviBody("images","grayscale"),m("images","grayscale"),e._speech("".concat(e._i18n.v("imagesGrayscale"))),i(t.imagesGrayscale)})),n(t.speechOn,(function(){e._setAttrDataBviBody("speech","true"),m("speech","true"),e._speech("".concat(e._i18n.v("speechOn"))),i(t.speechOn),e._speechPlayer()})),n(t.speechOff,(function(){e._speech("".concat(e._i18n.v("speechOff"))),e._setAttrDataBviBody("speech","false"),m("speech","false"),i(t.speechOff),e._speechPlayer()})),n(t.lineHeightNormal,(function(){e._setAttrDataBviBody("lineHeight","normal"),m("lineHeight","normal"),e._speech("".concat(e._i18n.v("lineHeightNormal"))),i(t.lineHeightNormal)})),n(t.lineHeightAverage,(function(){e._setAttrDataBviBody("lineHeight","average"),m("lineHeight","average"),e._speech("".concat(e._i18n.v("lineHeightAverage"))),i(t.lineHeightAverage)})),n(t.lineHeightBig,(function(){e._setAttrDataBviBody("lineHeight","big"),m("lineHeight","big"),e._speech("".concat(e._i18n.v("lineHeightBig"))),i(t.lineHeightBig)})),n(t.letterSpacingNormal,(function(){e._setAttrDataBviBody("letterSpacing","normal"),m("letterSpacing","normal"),e._speech("".concat(e._i18n.v("LetterSpacingNormal"))),i(t.letterSpacingNormal)})),n(t.letterSpacingAverage,(function(){e._setAttrDataBviBody("letterSpacing","average"),m("letterSpacing","average"),e._speech("".concat(e._i18n.v("LetterSpacingAverage"))),i(t.letterSpacingAverage)})),n(t.letterSpacingBig,(function(){e._setAttrDataBviBody("letterSpacing","big"),m("letterSpacing","big"),e._speech("".concat(e._i18n.v("LetterSpacingBig"))),i(t.letterSpacingBig)})),n(t.fontFamilyArial,(function(){e._setAttrDataBviBody("fontFamily","arial"),m("fontFamily","arial"),e._speech("".concat(e._i18n.v("fontArial"))),i(t.fontFamilyArial)})),n(t.fontFamilyTimes,(function(){e._setAttrDataBviBody("fontFamily","times"),m("fontFamily","times"),e._speech("".concat(e._i18n.v("fontTimes"))),i(t.fontFamilyTimes)})),n(t.builtElementsOn,(function(){e._setAttrDataBviBody("builtElements","true"),m("builtElements","true"),e._speech("".concat(e._i18n.v("builtElementsOn"))),i(t.builtElementsOn)})),n(t.builtElementsOff,(function(){e._setAttrDataBviBody("builtElements","false"),m("builtElements","false"),e._speech("".concat(e._i18n.v("builtElementsOFF"))),i(t.builtElementsOff)})),n(t.reset,(function(){e._speech("".concat(e._i18n.v("resetSettings"))),p(e._config,(function(t){e._setAttrDataBviBody(t,e._config[t]),m(t,e._config[t]),o()}))})),v(t.links,(function(i){n(i,(function(i){var n=i.target.getAttribute("data-bvi");"close"===n&&(e._setAttrDataBviBody("panelActive","false"),m("panelActive","false"),e._init()),"modal"===n&&(document.body.style.overflow="hidden",document.body.classList.add("bvi-noscroll"),t.modal.classList.toggle("show")),"modal-close"===n&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",t.modal.classList.remove("show")),"panel-hide"===n&&(document.querySelector(".bvi-panel").classList.add("bvi-panel-hide"),document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-hide"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-show"),m("panelHide","true"),e._speech("".concat(e._i18n.v("panelHide")))),"panel-show"===n&&(document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-show"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-hide"),document.querySelector(".bvi-panel").classList.remove("bvi-panel-hide"),m("panelHide","false"),e._speech("".concat(e._i18n.v("panelShow"))))}))})),n(t.modal,(function(e){e.target.contains(t.modal)&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",t.modal.classList.remove("show"))}))}},{key:"_getPanel",value:function(){var e=function(){var e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;u(g("panelFixed"))&&(e>200?document.querySelector(".bvi-panel").classList.add("bvi-fixed-top"):document.querySelector(".bvi-panel").classList.remove("bvi-fixed-top"))},t=u(g("panelHide"))?" bvi-panel-hide":"",i=u(g("panelHide"))?"bvi-show":" bvi-hide",n="\n    <div class='bvi-panel".concat(t,'\'>\n        <div class="bvi-blocks bvi-block-center">\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("fontSize"),'</div>\n                <a class="bvi-link bvi-fontSize-minus">А-</a>\n                <a class="bvi-link bvi-fontSize-plus">А+</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("siteColors"),'</div>\n                <a href="#" class="bvi-link bvi-theme-white">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-black">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-blue">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-brown">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-green">Ц</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("images"),'</div>\n                <a href="#" class="bvi-link bvi-images-on">\n                    <i class="bvi-images bvi-images-image"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-off">\n                    <i class="bvi-images bvi-images-minus-circle"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-grayscale">\n                    <i class="bvi-images bvi-images-adjust"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("speech"),'</div>\n                <a href="#" class="bvi-link bvi-speech-off">\n                    <i class="bvi-images bvi-images-volume-off"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-speech-on">\n                    <i class="bvi-images bvi-images-volume-up"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("settings"),'</div>\n                <a href="#" class="bvi-link" data-bvi="modal">\n                    <i class="bvi-images bvi-images-cog"></i>\n                </a>\n                <a href="#" class="bvi-link" data-bvi="close">\n                    ').concat(this._i18n.t("regularVersionOfTheSite"),'\n                </a>\n                <a href="#" class="bvi-link" data-bvi="panel-hide">\n                    <i class="bvi-images bvi-images-minus"></i>\n                </a>\n            </div>\n        </div>\n        <div class="bvi-modal">\n            <div class="bvi-modal-dialog">\n                <div class="bvi-modal-content">\n                    <div class="bvi-modal-header">\n                        <div class="bvi-modal-title">').concat(this._i18n.t("settings"),'</div>\n                        <a href="#" class="bvi-link bvi-modal-close" data-bvi="modal-close">×</a>\n                    </div>\n                    <div class="bvi-modal-body">\n                        <div class="bvi-blocks bvi-block-center">\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("letterSpacing"),'</div>\n                                <a href="#" class="bvi-link bvi-letter-spacing-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("lineHeight"),'</div>\n                                <a href="#" class="bvi-link bvi-line-height-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("font"),'</div>\n                                <a href="#" class="bvi-link bvi-font-family-arial">').concat(this._i18n.t("arial"),'</a>\n                                <a href="#" class="bvi-link bvi-font-family-times">').concat(this._i18n.t("times"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("builtElements"),'</div>\n                                <a href="#" class="bvi-link bvi-built-elements-on">').concat(this._i18n.t("on"),'</a>\n                                <a href="#" class="bvi-link bvi-built-elements-off">').concat(this._i18n.t("off"),'</a>\n                            </div>\n                        </div>\n                        <div class="bvi-blocks bvi-block-center">\n                            <a href="https://bvi.isvek.ru" class="bvi-copyright" target="_blank">bvi.isvek.ru</a>\n                        </div>\n                    </div>\n                    <div class="bvi-modal-footer">\n                        <a href="#" class="bvi-link bvi-reset">').concat(this._i18n.t("reset"),"</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"),o='<a href="#" class="bvi-link bvi-link-fixed-top bvi-no-styles '.concat(i,'" data-bvi="panel-show">')+'<i class="bvi-images bvi-images-eye bvi-images-size-32 bvi-no-styles"></i></a>';window.addEventListener("scroll",e),document.querySelector(".bvi-body").insertAdjacentHTML("beforebegin",n),document.querySelector(".bvi-body").insertAdjacentHTML("afterbegin",o),e()}},{key:"_set",value:function(){var e=this;document.body.classList.add("bvi-active"),d(document.body,"div","bvi-body"),p(this._config,(function(t){return e._setAttrDataBviBody(t,g(t))})),v(this._elements,(function(e){return e.style.display="none"})),document.querySelectorAll("img").forEach((function(e){e.classList.contains("bvi-img")&&e.classList.remove("bvi-img")})),document.querySelectorAll("body *").forEach((function(e){e.classList.contains("bvi-background-image")&&e.classList.remove("bvi-background-image")}))}},{key:"_remove",value:function(){var e=document.querySelector(".bvi-panel"),t=document.querySelector(".bvi-body"),i=document.querySelector(".bvi-link-fixed-top");e&&e.remove(),t&&h(t),i&&i.remove(),this._speech("".concat(this._i18n.v("panelOff"))),document.body.classList.remove("bvi-active"),v(this._elements,(function(e){return e.style.display=""})),u(g("reload"))&&document.location.reload(),p(this._config,(function(e){b(e)})),this._speechPlayer(),b("panelActive")}},{key:"_images",value:function(){document.querySelectorAll("img").forEach((function(e){e.classList.contains("bvi-no-style")||e.classList.add("bvi-img")})),document.querySelectorAll(".bvi-body *").forEach((function(e){var t=getComputedStyle(e);"none"===t.backgroundImage||"none"===t.background||e.classList.contains("bvi-no-style")||e.classList.add("bvi-background-image")}))}},{key:"_getConfig",value:function(e){e=t(t({},_),e);var i={};for(var n in _)i[n]=e[n];return c(i,w,L),i}},{key:"_setAttrDataBviBody",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.querySelector(".bvi-body").setAttribute("data-bvi-".concat(e),t)}},{key:"_speechPlayer",value:function(){var e=this,t=document.querySelectorAll(".bvi-speech-text"),i=document.querySelectorAll(".bvi-speech-link"),n=document.querySelectorAll(".bvi-speech");if("speechSynthesis"in window&&u(g("speech"))){if(n){t&&t.forEach((function(e){return h(e)})),i&&i.forEach((function(e){return e.remove()})),n.forEach((function(e,t){var i="bvi-speech-text-id-".concat(t+1);d(e,"div","bvi-speech-text ".concat(i)),e.insertAdjacentHTML("afterbegin",'\n            <div class="bvi-speech-link">\n              <a href="#" class="bvi-link bvi-speech-play" title="Воспроизвести">Воспроизвести</a>\n              <a href="#" class="bvi-link bvi-speech-pause disabled" title="Пауза">Пауза</a>\n              <a href="#" class="bvi-link bvi-speech-resume disabled" title="Продолжить">Продолжить</a>\n              <a href="#" class="bvi-link bvi-speech-stop disabled" title="Стоп">Стоп</i></a>\n          </div>')}));var o=document.querySelectorAll(".bvi-speech-play"),s=document.querySelectorAll(".bvi-speech-pause"),r=document.querySelectorAll(".bvi-speech-resume"),a=document.querySelectorAll(".bvi-speech-stop"),l=function(e,t){e.forEach((function(e){e.addEventListener("click",(function(i){if(i.preventDefault(),"function"==typeof t)return t(e,i)}),!1)}))};l(o,(function(t,i){var n=i.target,o=n.parentNode.nextElementSibling,s=i.target.closest(".bvi-speech-link"),r=document.querySelectorAll(".bvi-speech-play"),a=document.querySelectorAll(".bvi-speech-pause"),l=document.querySelectorAll(".bvi-speech-resume"),c=document.querySelectorAll(".bvi-speech-stop");e._speech(o.textContent,o,!0),r.forEach((function(e){return e.classList.remove("disabled")})),a.forEach((function(e){return e.classList.add("disabled")})),l.forEach((function(e){return e.classList.add("disabled")})),c.forEach((function(e){return e.classList.add("disabled")})),n.classList.add("disabled"),s.querySelector(".bvi-speech-pause").classList.remove("disabled"),s.querySelector(".bvi-speech-stop").classList.remove("disabled")})),l(s,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-resume").classList.remove("disabled"),f().pause()})),l(r,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.remove("disabled"),f().resume()})),l(a,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.add("disabled"),n.querySelector(".bvi-speech-play").classList.remove("disabled"),f().cancel()}))}}else t&&t.forEach((function(e){return h(e)})),i&&i.forEach((function(e){return e.remove()}))}},{key:"_speech",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("speechSynthesis"in window&&u(g("speech"))){f().cancel();for(var o=120,s=new RegExp("^[\\s\\S]{"+Math.floor(60)+","+o+"}[.!?,]{1}|^[\\s\\S]{1,"+o+"}$|^[\\s\\S]{1,"+o+"} "),r=[],a=e,l=f().getVoices();a.length>0;)r.push(a.match(s)[0]),a=a.substring(r[r.length-1].length);r.forEach((function(e){var o=new SpeechSynthesisUtterance(e.trim());o.volume=1,o.rate=1,o.pitch=1,o.lang=i._config.lang;for(var s=0;s<l.length;s++)"ru-RU"===i._config.lang&&"Microsoft Pavel - Russian (Russia)"===l[s].name&&(o.voice=l[s]),"en-US"===i._config.lang&&"Microsoft Pavel - English (English)"===l[s].name&&(o.voice=l[s]);n&&(o.onboundary=function(e){t.classList.add("bvi-highlighting");var i=function(e,t){e=String(e),t=Number(t)>>>0;var i=e.slice(0,t+1).search(/\S+$/),n=e.slice(t).search(/\s/);return n<0?e.slice(i):e.slice(i,n+t)}(e.utterance.text,e.charIndex),n=t.textContent,o=i.replace(/(\s+)/,"((<[^>]+>)*$1(<[^>]+>)*)"),s=new RegExp("("+o+")","gi");n=(n=n.replace(s,"<mark>$1</mark>")).replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"),t.innerHTML=n},o.onend=function(e){t.classList.remove("bvi-highlighting");var i=t.textContent;i=i.replace(/(<mark>$1<\/mark>)/,"$1"),t.innerHTML=i}),f().speak(o)}))}}}]),e}();return{Bvi:E}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=c():"function"==typeof define&&define.amd?define(c):(l="undefined"!=typeof globalThis?globalThis:l||self).isvek=c(),document.addEventListener("DOMContentLoaded",(function(){var e=new isvek.Bvi({target:".bvi-open",theme:"blue",font:"arial",fontSize:24,letterSpacing:"normal",lineHeight:"normal",images:!0,reload:!1,speech:!0,builtElements:!0,panelHide:!1,panelFixed:!0,lang:"ru-RU"});console.log(e)})),document.querySelectorAll("[data-dropdown-hover]").forEach((function(e){const t=e.querySelector("[data-dropdown-button]"),i=e.querySelector("[data-dropdown-list]"),n=i.querySelectorAll("[data-dropdown-item]"),o=e.querySelector("[data-dropdown-input]");t.addEventListener("mouseenter",(function(e){i.classList.add("visible"),this.classList.add("active")})),n.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),t.innerText=this.innerText,t.focus(),o.value=this.dataset.value,i.classList.remove("visible"),t.classList.remove("active")}))})),document.addEventListener("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key||(t.classList.remove("active"),i.classList.remove("visible"))}))}));document.querySelectorAll("[data-dropdown-hover]").forEach((e=>{e.addEventListener("mouseout",(t=>{const i=e.querySelector("[data-dropdown-list]"),n=e.querySelector("[data-dropdown-button]");e.contains(t.relatedTarget)||i.classList.contains("visible")&&(i.classList.remove("visible"),n.classList.remove("active"))}))})),window.addEventListener("load",(function(){document.body.classList.remove("load")}));const u=document.querySelector("#search-input"),d=(document.querySelector("#suggestions-list"),document.querySelector(".search-header__button-clear"));u.addEventListener("input",(()=>{u.value.trim().toLowerCase();d.classList.add("visible")})),d.addEventListener("click",(function(){u.value="",d.classList.remove("visible")})),window.FLS=!1,function(){const e=document.querySelectorAll("[data-spollers]");if(e.length>0){document.addEventListener("click",l);const n=Array.from(e).filter((function(e,t,i){return!e.dataset.spollers.split(",")[0]}));n.length&&s(n);let o=r(e,"spollers");function s(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),a(e)):(e.classList.remove("_spoller-init"),a(e,!1))}))}function a(e,t=!0){let i=e.querySelectorAll("details");i.length&&i.forEach((e=>{let i=e.querySelector("summary");t?(i.removeAttribute("tabindex"),e.hasAttribute("data-open")?(i.classList.add("_spoller-active"),e.open=!0):(e.open=!1,i.nextElementSibling.hidden=!0)):(i.setAttribute("tabindex","-1"),i.classList.remove("_spoller-active"),e.open=!0,i.nextElementSibling.hidden=!1)}))}function l(e){const n=e.target;if(n.closest("summary")&&n.closest("[data-spollers]")&&(e.preventDefault(),n.closest("[data-spollers]").classList.contains("_spoller-init"))){const e=n.closest("summary"),o=e.closest("details"),s=e.closest("[data-spollers]"),r=s.hasAttribute("data-one-spoller"),a=o.hasAttribute("data-spoller-scroll"),l=s.dataset.spollersSpeed?parseInt(s.dataset.spollersSpeed):500;if(!s.querySelectorAll("._slide").length&&(r&&!o.open&&c(s),o.open?setTimeout((()=>{o.open=!1}),l):o.open=!0,e.classList.toggle("_spoller-active"),((e,n=500)=>{e.hidden?i(e,n):t(e,n)})(e.nextElementSibling,l),a&&e.classList.contains("_spoller-active"))){const e=o.dataset.spollerScroll,t=+e?+e:0,i=o.hasAttribute("data-spoller-scroll-noheader")?document.querySelector(".header").offsetHeight:0;window.scrollTo({top:o.offsetTop-(t+i),behavior:"smooth"})}}if(!n.closest("[data-spollers]")){const e=document.querySelectorAll("[data-spoller-close]");e.length&&e.forEach((e=>{const i=e.closest("[data-spollers]"),n=e.parentNode;if(i.classList.contains("_spoller-init")){const o=i.dataset.spollersSpeed?parseInt(i.dataset.spollersSpeed):500;e.classList.remove("_spoller-active"),t(e.nextElementSibling,o),setTimeout((()=>{n.open=!1}),o)}}))}}function c(e){const i=e.querySelector("details[open]");if(i&&!e.querySelectorAll("._slide").length){const n=i.querySelector("summary"),o=e.dataset.spollersSpeed?parseInt(e.dataset.spollersSpeed):500;n.classList.remove("_spoller-active"),t(n.nextElementSibling,o),setTimeout((()=>{i.open=!1}),o)}}o&&o.length&&o.forEach((e=>{e.matchMedia.addEventListener("change",(function(){s(e.itemsArray,e.matchMedia)})),s(e.itemsArray,e.matchMedia)}))}}()})();